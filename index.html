<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>测试1</title>
<!--         <script src="js/index.js" type="text/javascript"></script> -->
        <link rel="stylesheet" href="css/index.css" />
        <!--  marked必须引入在requirejs上边，不然会报define异常 -->
        <script src="js/lib/vue.js"></script>
        <script src="js/lib/marked/marked.min.js"></script>
        <script src="js/lib/requirejs.js"></script>
		<script src="js/script/main.js"></script>
        <script>
            require(['js/data/request_fetch.js'],function () {
                var makedownContent = new Vue({
                    el:'#makedownContent',
                    data:{
                        makedownContent: ''
                    }
                });
                req_get('https://api.github.com/repos/CHNingMing/showPage2/contents/makedown',function (makedownList) {
                    var leftList = new Vue({
                        el:'#leftList',
                        data:{
                            makedowns: makedownList,
                            lis: '<li>A</li><li>A</li>'
                        },
                        methods: {
                            showMakedown:function(url){
                                req_get(url,function(content){
                                    var makeStr = decodeURIComponent(escape(window.atob(content.content)));
                                    makedownContent.$data.makedownContent = marked(makeStr);
                                });
                            }
                        }
                    });
                });
            });
        </script>
    </head>
    <body>
    <header>
        <span>头</span>
    </header>
    <!-- 推荐 -->
    <div>

    </div>
    <!-- 左目录 -->
    <div id="leftList" class="leftList">
        <ul >
            <li v-for="makedown in makedowns" v-bind:url="makedown.url" v-on:click="showMakedown(makedown.url)"  >
                {{makedown.name}}
            </li>
        </ul>
    </div>
    <!-- 正文 -->
    <div id="makedownContent" class="makedownContent" v-html="makedownContent">

    </div>
    <footer>

    </footer>
    </body>
</html>
